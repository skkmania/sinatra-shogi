<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Shogi</title>
    <script src="http://www.google.com/jsapi"></script>
    <script>
      google.load("prototype", "1.6.0.3");
      google.load("scriptaculous", "1.8.2");
    </script>
    <script src="lib/scriptaculous/resizable.js"></script>
    <script src="lib/livepipe/livepipe.js"></script>
    <script src="lib/livepipe/window.js"></script>
    <script src="lib/scriptaculous/unittest.js"></script>
    <script src="lib/m17n.js" charset="UTF-8"></script>
    <script src="test/unit/log4pipe_test_common_functions.js" charset="UTF-8"></script>
    <script src="lib/log4pipe.js" charset="UTF-8"></script>
    <script src="lib/common-utils.js" charset="UTF-8"></script>
    <script src="area.js"></script>
    <script src="lib/pseudo-wave.js"></script>
    <script src="lib/msgpack.js"></script>
    <script src="maintainer.js" charset="UTF-8"></script>
    <script src="move.js" charset="UTF-8"></script>
    <script src="store.js"></script>
    <script src="handler.js"></script>
    <script src="book.js"></script>
    <script src="controller.js" charset="UTF-8"></script>
    <script src="piece.js" charset="UTF-8"></script>
    <script src="cell.js" charset="UTF-8"></script>
    <script src="board.js" charset="UTF-8"></script>
    <script src="stand.js" charset="UTF-8"></script>
    <script src="shogi.js" charset="UTF-8"></script>

    <script>
      Event.observe(window, 'load', function() {
      //  $('Log').insert(new Element('img',
      //   {id:'handle0', src:"img/lib/window_close.gif"}));
       // new Resizable('Log',{handle:'handle0'});
        //LOG.setLevel(Log.ERROR);
        if(wave){
          window.gameController = new GameController({containerId:'shogi',
               'playerSetting':'playGame', 'gameConstructor':'shogi'});
               //'playerSetting':'review', 'gameConstructor':'shogi'});
        }
        // if (wave && wave.isInWaveContainer())
        if(wave) 
          wave.setStateCallback(window.gameController.acceptState.bind(window.gameController));
        if(window.gameController.settings['playerSetting'] != 'playGame')
          window.gameController.handler.refreshBoard(1);
        // log window を表示するためのリンクアンカーをページに追加
        var elem = new Element('a',{'id':'Loganchor', 'href':'#Log', 'title':'Log'});
        elem.insert('Log');
        $('links_pool').appendChild(elem);
        LOG.popupInitialize('Log', {'container':'Loganchor', width:800, height:550, resizable:true});
        LOG.setLevel('debug');
      });

      function addPlayer(name) {
        window.gameController.joinButtonPressed(name);
      }
    </script>
    <link rel="stylesheet" href="css/log4pipe.css" type="text/css" />
    <link rel="stylesheet" href="css/shogi.css" type="text/css" />
    <link rel="stylesheet" href="css/shogi_old.css" type="text/css" />
  </head>
  <body>

<div id="container">
  <div id="shogi"></div>
  <div id="boardArea"></div>
  <div id="promoteOrNot" class="confirmAction" style="display:none">
    <div id="yesElement">yes</div>
    <div id="noElement">no</div>
  </div>
</div>

<div id="preMoves"></div>
   <div id="nxtMvTitle"></div>
   <div id="nxtMoveArea">
     <div id="nxtMoves"         class="Moves"></div>
     <div id="nmAllPoints"      class="Moves"></div>
     <div id="nmPersonalPoints" class="Moves"></div>
     <div id="nmUpArrows"       class="Moves"></div>
     <div id="nmDownArrows"     class="Moves"></div>
     <div id="nmCommentsAdd"    class="Moves"></div>
     <div id="nmComments"       class="Moves"></div>
     <div id="nmCommentsMore"   class="Moves"></div>
   </div>

  <p id="links_pool">
  </p>
  <p id="window_pool">
    <div id="logger0"></div>
    <div id="logger1"></div>
  </p>

<div id="gameTurn"></div>
<div id="boardTurn"></div>
<div id="viewersTurn"></div>

   <div id="BoardPoints">
     <div id="totalBoardPoint">
       <span id="tBPoint"></span>
     </div>
     <div id="pBPoint"> </div>
   </div>
   <div id="BoardComments">
     <div id="totalBoardComments"></div>
     <div id="personalBoardComment"></div>
     <div id="personalBoardCommentIpeTrigger"></div>
   </div>
   <div id="situationImage">
     <p id="siTitle"></p>
   </div>
<input id="inputViewerId" type="text" name="viewerId" maxlength="10" />
<button id="join-button" class="join t" onclick="window.gameController.joinButtonPressed($F('inputViewerId')); this.hide();">join</button>
<!--
<button id="join-button" class="join t" onclick="window.gameController.joinButtonPressed(wave.getViewer().getId()); this.hide();">join</button>
--!>
  <div id="debug"></div>
  <div id="message"></div>

    <div id="test">
    </div>

<div id="testlog"> </div>

   <div id="header">
     <div id="displayConf"></div>
   </div>

  </body>
</html>
<!--
   <div id="kifRead">
     <p id="krTitle"></p>
     <form method="POST" id="kifReadForm" action="./24kif.rb">
       <textarea name="kifText" cols="40" rows="1" id="kifTextArea"></textarea>
         <input type="submit" name="submit" value="post" />
         <input type="reset" name="reset" value="reset" />
     </form>
   </div>

--!>
