<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<head>
  <title>shogi Unit test file</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<script src="../../lib/prototype.js"></script>
<script src="../../lib/scriptaculous/scriptaculous.js"></script>
<script src="../../lib/scriptaculous/resizable.js"></script>
<script src="../../lib/livepipe/livepipe.js"></script>
<script src="../../lib/livepipe/window.js"></script>
<script src="../../lib/scriptaculous/unittest.js"></script>
<script src="../../lib/m17n.js" charset="UTF-8"></script>
<script src="../../lib/log4pipe.js" charset="UTF-8"></script>
<script src="../../test/unit/log4pipe_test_common_functions.js" charset="UTF-8"></script>
<script src="../../lib/common-utils.js" charset="UTF-8"></script>
<script src="../../lib/pseudo-wave.js" charset="UTF-8"></script>
<script src="../../controller/controller.js" charset="UTF-8"></script>
<script src="../../shogi.js" charset="UTF-8"></script>
<script src="../../lib/unittest.js" type="text/javascript"></script>
<link rel="stylesheet" href="../../css/shogi.css" type="text/css" />
<link rel="stylesheet" href="../test.css" type="text/css" />
<link rel="stylesheet" href="../../css/log4pipe.css" type="text/css" />
  <style type="text/css" media="screen">
  /* <![CDATA[ */
    #div_absolute_test { position: absolute }
    #links_pool a { margin-left: 10px }
  /* ]]> */
  </style>
</head>
<body>
<h1>shogi Unit test file</h1>
<p>
  Test of common functions in shogi.js
</p>

<!-- Log output -->
<div id="testlog"> </div>

<!-- Tests follow -->
<script type="text/javascript" language="javascript" charset="utf-8">
// <![CDATA[

  new Test.Unit.Runner({
    
    testKanji : function() {  with( this )  {
      var num = 1;
      assertEqual( '一', num.toKanji() );
    } },

  testArraySubtract : function() {  with( this )  {
    // 配列の引き算。破壊的。
    var array = [0,1,2,3,4,5,6,7,8,9];
    var array2 = [1,2,3,4,5,6];
    array.subtract(array2);
    assertEqual( [0,7,8,9].toString(), array.toString());
    array.subtract([8,1,3]);
    assertEqual( '0,7,9', array.toString());
    array.subtract([0,7,9]);
    assertEqual( '', array.toString());
    array  = [0,1,2,2,2,3,3,4,5,6];
    array2 = [    2,2,  3,    5  ]
    array.subtract(array2);
    assertEqual( '0,1,2,3,4,6', array.toString());
  } },

  testSubtract : function() {  with( this )  {
    assertEqual( "abcd", "abcdefj".subtract("efj") );
    assertEqual( "bd", "abcdefj".subtract("acefj") );
    assertEqual( "acefj", "abcdefj".subtract("bd") );
    assertEqual( "", "abcdefj".subtract("abcdefj") );
    assertEqual( "abcdefj", "aaabcdefj".subtract("aa") );
    // 返されるのはコピーである
    var s = "abcdefj";
    var s2 = s.subtract("bej");
    assertEqual( "acdf", s2 );
    // 元のsは変化しない
    assertEqual( "abcdefj", s );
  } }
  }, "testlog");
// ]]>
</script>
</body>
</html>
